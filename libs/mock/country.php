<?php

require '../cron_db_connection.php';

require '../vendor/autoload.php';

$filter = \RedBeanFVM\RedBeanFVM::getInstance();

$key_map = [
	'region_name'=>'name',
	'region_title'=>'title',
	'independenceday'=>'independence',
	'description'=>'description',
	'flag'=>'flag_img',
	'flag_desc'=>'flag_desc',
	'population'=>'population',
	'image'=>'img',
	'cover_image'=>'cover_img',
	'longitude'=>'longitude',
	'latitude'=>'latitude',
	'ragion_map'=>'map_img',
	'status'=>'status',
	'twittershortdesc'=>'short_desc',
	'region_titlebanner'=>'title_banner'
];

$a = array(
	array(
		'id' => '1',
		'region_name' => 'Haiti',
		'region_title' => 'About Haiti',
		'independenceday' => '1804-01-01',
		'description' => 'Haiti is the world\\\'s first black-led republic and the second independent nation in the Western Hemisphere. It is the most mountainous country in the Caribbean and has the second longest coastline in the Caribbean with 70% of its shores untouched.',
		'flag' => '1393134474HaitiFlagGrungebythink0.jpg',
		'flag_desc' => '{"motto":"Libert&eacute;, &Eacute;galit&eacute;, Fraternit&eacute;","anthem":"La Dessalinienne","national_dish":"Griots with Rice &amp; Beans"}',
		'population' => '{"capital":"Port-au-Prince","language":"French Haitian Creole","population":"9,719,932","flag_shortdesc":"Ethnic Groups\\r\\n95% Black\\r\\n5% Mulatto \\r\\n5% White"}',
		'image' => '1393177643Labadee-Haiti.jpg',
		'cover_image' => '13944008152000px-coatofarmsofhaiti-svg.png',
		'longitude' => '-72.285215',
		'latitude' => '18.971187',
		'ragion_map' => '1409750622haiti.png',
		'status' => '1',
		'twittershortdesc' => NULL,
		'region_titlebanner' => 'Haiti'
	),
	array('id' => '2','region_name' => 'Jamaica','region_title' => 'About Jamaica','independenceday' => '1962-08-06','description' => 'This island is more than beaches. It has waterfalls, rainforests, lagoons, mineral baths and hot springs too. Jamaica also has more churches per square mile than any other country in the world. It\\\'s the birthplace of Reggae music and where Ian Fleming chose to write his 007 novels.','flag' => '1393134511flag-jamaica-XL.jpg','flag_desc' => '{"motto":"Out of Many, One People","anthem":"Jamaica, Land We Love","national_dish":"Ackee &amp; Salt Fish"}','population' => '{"capital":"Kingston","language":"English ","population":"2,889,187","flag_shortdesc":"Ethnic Groups\\r\\n76.3% African Descent\\r\\n15.1% Afro-European\\r\\n3.4% East Indian\\r\\n3.2% Caucasian\\r\\n1.2% Chinese"}','image' => '1393177952The-Caves-Hotel-Jamaica-4.jpg','cover_image' => '1393437978JAcoatofarms.jpg','longitude' => '-77.297508','latitude' => '18.109581','ragion_map' => '1409751252jamica.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Jamaica'),
	array('id' => '4','region_name' => 'Puerto Rico','region_title' => 'About Puerto Rico','independenceday' => '0000-00-00','description' => 'El Yunque, the only tropical rainforest in the U.S. national park system is located in this U.S. territory. San Juan, Puerto Rico is the current home of Bacardi rum. The island also produces and exports more rum than any other county in the world.','flag' => '1393161303puerto-rico-flag-grunge.jpg','flag_desc' => '{"motto":"","anthem":"La Borinquena","national_dish":"Arroz con Gandules"}','population' => '{"capital":"San Juan","language":"Spanish","population":"3,667,084","flag_shortdesc":"Ethnic Groups\\r\\n75.8% White\\r\\n12.4% Black\\r\\n3.3% Mixed\\r\\n0.5% Amerindian\\r\\n0.2% Asian\\r\\n"}','image' => '1393178051beautiful-scenery-puerto-rico-wallpapers-2560x1920.jpg','cover_image' => '1394407043pr.gif','longitude' => '-66.590149','latitude' => '18.220833','ragion_map' => '1409750763puerto-rico.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Puerto Rico'),
	array('id' => '5','region_name' => 'Trinidad & Tobago','region_title' => 'About Trinidad and Tobago','independenceday' => '1976-08-01','description' => 'The roots of calypso music lie in this two-island nation. Though the two islands are treated as one nation, they each have a capital city, Port-of-Spain is the capital of Trinidad and Scarborough is the capital city of Tobago.','flag' => '1393161343FlagofTrinidadandTobago.png','flag_desc' => '{"motto":"Together We Aspire, Together We Achieve","anthem":"Forged From The Love Of Liberty","national_dish":"Crab &amp; Calaloo "}','population' => '{"capital":"Port of Spain","language":"English","population":"1,346,350","flag_shortdesc":"Ethnic Groups\\n35% East Indian\\n34% Afro-Trinbagonian\\n23% Mixed (includes Dougla,Chindian,Mestizo)\\n"}','image' => '1393178314ParlatuvierBayview2009a.jpg','cover_image' => '1394407280CoatofarmsofTrinidadandTobago.png','longitude' => '-61.222503','latitude' => '10.691803','ragion_map' => '1409750837trinidad.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Trinidad & Tobago'),
	array('id' => '6','region_name' => 'Dominican Republic','region_title' => 'About Dominican Republic','independenceday' => '1924-07-12','description' => 'The oldest permanent settlement in the Western Hemisphere is Dominican Republic\\\'s capital city, Santo Domingo, founded in 1496. The island is credited with creating and developing Merengue music and is the birthplace of some of the world\\\'s most notable baseball players.','flag' => '1393187905Flag-of-Dominican-Republic-Flags-2.jpg','flag_desc' => '{"motto":"Dios, Patria, Libertad","anthem":"Himno Nacional","national_dish":"Sancocho "}','population' => '{"capital":"Santo Domingo","language":"Spanish","population":"9,445,281","flag_shortdesc":"Ethnic groups \\t\\r\\n73% Mulatto\\r\\n16% White\\r\\n11% Black"}','image' => '1393462135CityofSosuaDominicanRepublicAerialView.jpg','cover_image' => '1394400581CoatofarmsoftheDominicanRepublic.svg.png','longitude' => '-70.162651','latitude' => '18.735693','ragion_map' => '1409750595dominican-republic.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Dominican Republic'),
	array('id' => '7','region_name' => 'Anguilla','region_title' => 'About Anguilla','independenceday' => '0000-00-00','description' => 'The word Anguilla means eel in Italian. The tiny island was named so by Christopher Columbus in 1493 because from a distance it resembled an eel. Just 16 miles long and three miles wide, Anguilla is home to 33 beautiful beaches that attract more than 100,000 visitors each year.','flag' => '1393451899anguillaflagdrapeaubandierabandeiraflagga-1979px.png','flag_desc' => '{"motto":"Strength and Endurance","anthem":"God Bless Anguilla","national_dish":"Pigeon Peas and Rice"}','population' => '{"capital":"The Valley","language":"English","population":"13,600","flag_shortdesc":"Ethnic groups \\t\\r\\n90.1% West African\\r\\n4.6%   Multiracial\\r\\n3.7%   European\\r\\n1.5%   Other\\r\\n"}','image' => '1393451899anguilla-aerial-view-western-portion.jpg','cover_image' => '1393451900Anguilla-CoatsofArms.png','longitude' => '-63.068615','latitude' => '18.220554','ragion_map' => '1409751229anguila.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Anguilla'),
	array('id' => '8','region_name' => 'Antigua & Barbuda','region_title' => 'About Antigua & Barbuda','independenceday' => '1981-11-01','description' => '','flag' => 'regionflag-8.png','flag_desc' => '{"motto":"Each Endeavouring, All Achieving","anthem":"Fair Antigua, We Salute Thee","national_dish":"Fungee & Pepperpot"}','population' => '{"capital":"Capital: Saint john\\\\\'s","language":"English ","population":"81,79","flag_shortdesc":"Ethnic groups \\n91% Black\\n4.4% Mixed\\n1.7% White\\n2.9% other"}','image' => '139345206869808380.jpg','cover_image' => '13934520682000px-CoatofarmsofAntiguaandBarbuda.svg.png','longitude' => '-61.844004','latitude' => '17.122146','ragion_map' => '1409750376antigua--barbuda.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Antigua & Barbuda'),
	array('id' => '9','region_name' => 'Bahamas','region_title' => 'About Bahamas','independenceday' => '1973-07-10','description' => 'Home to some of the oldest underwater caves in the world, the Bahamas is an island chain made up of 700 islands and over 2,000 cays. Surrounded by shallow waters, seafood is the staple of the Bahamian diet with conch as a main ingredient in many local specialties.','flag' => 'regionflag-9.png','flag_desc' => '{"motto":"Forward, Upward, Onward, Together","anthem":"March On, Bahamaland","national_dish":"Conch w\\/ Peas &amp; Rice "}','population' => '{"capital":"Nassau","language":"English","population":"353,658","flag_shortdesc":"Ethnic&nbsp;Groups\\n90% Black\\n5% White\\n3% Mixed\\n0.4% Asian\\n0.2% East Indian"}','image' => '1394391941atlantis-bahamas-wallpapers-2560x1920.jpg','cover_image' => '1394400005CoatofarmsoftheBahamas.svg.png','longitude' => '-77.396280','latitude' => '25.034280','ragion_map' => '1409750426bahamas.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Bahamas'),
	array('id' => '10','region_name' => 'Barbados','region_title' => 'About Barbados','independenceday' => '1966-11-30','description' => 'Barbados is the only coral island in the Lesser Antilles region of the Caribbean with white sand beaches. Harrison’s Cave is one of the island’s most unique attractions with streams of crystal-clear running water that drop from waterfalls to form deep emerald pools.','flag' => '13943916491500px-FlagofBarbados.svg.png','flag_desc' => '{"motto":"Pride and Industry","anthem":"In Plenty and in Time of Need","national_dish":"Cou-Cou and Flying Fish"}','population' => '{"capital":"Bridgetown","language":"English","population":"274,200","flag_shortdesc":"Ethnic Groups\\t\\r\\n80% Afro-Bajan\\r\\n16% Asian\\/ Multiracial\\r\\n4% European"}','image' => '1393452312crane-bay-beach-barbados-wallpapers-2560x1920.jpg','cover_image' => '1394392202Unknown.jpeg','longitude' => '-59.543198','latitude' => '13.193887','ragion_map' => '1409750436barbados.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Barbados'),
	array('id' => '11','region_name' => 'Belize','region_title' => 'About Belize - (Not An Island)','independenceday' => '1981-09-21','description' => '','flag' => 'regionflag-11.png','flag_desc' => '{"motto":"Sub Umbra Floreo","anthem":"Land of the Free","national_dish":"Rice &amp; Beans w\\/ Stewed Chicken &amp; Potato Salad also called 1,2,3."}','population' => '{"capital":"Belmopan","language":"English\\/Spanish","population":"334,297","flag_shortdesc":"Ethnic Groups \\n54% Black\\n31% European\\n8% Multiracial\\n4% Asian\\n"}','image' => '1393452702Belize-Vacation-Resort.jpg','cover_image' => '1393452702CoatofarmsofBelize.svg.png','longitude' => '-88.497650','latitude' => '17.189877','ragion_map' => '1409750445belize.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Belize'),
	array('id' => '12','region_name' => 'Bermuda','region_title' => 'About Bermuda','independenceday' => '0000-00-00','description' => '','flag' => 'regionflag-12.png','flag_desc' => '{"motto":"Whither The Fates Carry","anthem":"Hail to Bermuda ","national_dish":"Fish Chowder"}','population' => '{"capital":"Hamilton","language":"English","population":"64,268","flag_shortdesc":"Ethnic Groups \\n54% Black\\n31% European\\n8% Multiracial\\n4% Asian\\n2% other"}','image' => '1393452830NASBermudaaerialview021993.jpg','cover_image' => '1393452833Bermuda.png','longitude' => '-64.750500','latitude' => '32.307800','ragion_map' => '1409750453bermuda.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Bermuda'),
	array('id' => '13','region_name' => 'British Virgin Islands','region_title' => 'About British Virgin Islands','independenceday' => '0000-00-00','description' => 'The British Virgin Islands are made up of 60 islands including Tortola and Virgin Gorda. Most of the British Virgin Islands are of volcanic origin. The island of Anegada, one of the largest in the BVI group, is a coral and limestone island.','flag' => '1393453010British-Virgin-Islands.gif','flag_desc' => '{"motto":"Be Vigilant","anthem":" Oh, Beautiful Virgin Islands ","national_dish":"Fish And Fungi "}','population' => '{"capital":"Road Town","language":"English","population":"27,800","flag_shortdesc":"Ethnic Groups\\t\\r\\n83.36% Afro-Caribbean\\r\\n7.28% White\\r\\n5.38% Multiracial\\r\\n3.14% East Indian\\r\\n"}','image' => '1393453010wwwplus613netPussersMarinaCayTortola.jpg','cover_image' => '1393453015britishvirginislands-coatofarms.png','longitude' => '-64.639968','latitude' => '18.420695','ragion_map' => '1409750466british-virgin-island.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'British Virgin Islands'),
	array('id' => '14','region_name' => 'Cayman Islands','region_title' => 'About Cayman Islands','independenceday' => '0000-00-00','description' => 'There are three islands in the Cayman Islands: Grand Cayman, Cayman Brac and Little Cayman. Aside from being one of the world’s friendliest tax havens, the Cayman Islands offer a lot to tourists in the form of a seven mile beach on Grand Cayman and a number of caves on Cayman Brac.','flag' => '1393453142Cayman-Islandsflag.gif','flag_desc' => '{"motto":"He Hath Founded It Upon The Seas","anthem":"Beloved Isle Cayman","national_dish":"Buccaneer Turtle Steak"}','population' => '{"capital":"George Town","language":"English","population":"56,732","flag_shortdesc":"Ethnic Groups \\r\\n40% Afro-European\\r\\n20% European\\r\\n20% Black\\r\\n20% Other"}','image' => '13943701391920x1080-Cayman-Sunset.jpg','cover_image' => '1393453143cayman-islands-code-of-arms2.jpg','longitude' => '-81.254600','latitude' => '19.313300','ragion_map' => '1409750501cayman-island.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Cayman Islands'),
	array('id' => '15','region_name' => 'Colombia','region_title' => 'About Colombia (Cartagena)','independenceday' => '1991-07-04','description' => 'Officially named Cartagena de Indias, this island is one of Colombia’s most popular tourist attractions. The city was declared a UNECSO World Heritage Site in 1984. Cartagena’s excellent geographical location made the city shelter for many treasures of the Spanish Crown during the 17th century.','flag' => '1393453362Colombia-Flag.jpg','flag_desc' => '{"motto":"Libertad Y Orden","anthem":"&iexcl;Oh, Gloria Inmarcesible!","national_dish":"Bandeja Paisa"}','population' => '{"capital":"Bogot&amp;amp;amp;aacute;, D.C.","language":"Spanish","population":"47,072,915","flag_shortdesc":"Ethnic groups \\r\\n49.0% Mestizo\\r\\n37.0% White\\r\\n10.6% Afro Colombian\\r\\n3.4% Amerindian\\r\\n0.01% Roma"}','image' => '1393453362Colombia.jpg','cover_image' => '1394400356414px-CoatofarmsofColombia3.svg.png','longitude' => '-74.297333','latitude' => '4.570868','ragion_map' => '1409750508colombia.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Colombia'),
	array('id' => '16','region_name' => 'Costa Rica','region_title' => 'About Costa Rica - (Not An Island)','independenceday' => '1949-11-02','description' => 'More than 25% of the land in this Central American nation is protected national parks and refuges. It is
	one of few countries in the world that does not have a standing army. Costa Rica’s natives call
	themselves Ticos and Ticas.','flag' => '1393453519Costa-Rica.gif','flag_desc' => '{"motto":"Pura Vida","anthem":"Noble Patria, Tu Hermosa Bandera","national_dish":"Gallo Pinto"}','population' => '{"capital":"San Jose ","language":"Spanish","population":"4,586,353","flag_shortdesc":"Ethnic Groups \\r\\n65.8% White \\/ Castizo\\r\\n13.65% Mestizo\\r\\n6.72% Mulatto\\r\\n2.40% Amerindian\\r\\n1.03% Black\\r\\n0.21% Asian\\r\\n"}','image' => '1393453519o-COSTA-RICA-facebook.jpg','cover_image' => '1393453520Costa-Rica.png','longitude' => '-83.753428','latitude' => '9.748917','ragion_map' => '1409750534costa-rica.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Costa Rica'),
	array('id' => '17','region_name' => 'Cuba','region_title' => 'About Cuba','independenceday' => '1959-01-01','description' => 'This island is famous for its controversial politics, however, Cuba is also known to have one of the best
	healthcare systems on the planet and has the highest doctor to patient ratio in the world. The bee
	hummingbird, the world’s smallest bird is native to Cuba.','flag' => '1393453647cuba-flag.jpg','flag_desc' => '{"motto":"Homeland or Death","anthem":"El Himno de Bayamo","national_dish":"Ropa Vieja"}','population' => '{"capital":"Havana","language":"Spanish","population":"11,163,934","flag_shortdesc":"Ethnic Groups\\r\\n65.1% White\\r\\n23.8% Mulatto \\/ Mestizo\\r\\n10.1% Black\\r\\n1% Asian"}','image' => '1393453647havana-cuba-wallpapers-2560x1920.jpg','cover_image' => '1393453648cuba.gif','longitude' => '-77.781167','latitude' => '21.521757','ragion_map' => '1409750540cuba.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Cuba'),
	array('id' => '18','region_name' => 'Dominica','region_title' => 'About Dominica','independenceday' => '1978-11-03','description' => '','flag' => 'regionflag-18.png','flag_desc' => '{"motto":"After God is the Earth","anthem":"Isle of Beauty, Isle of Splendour","national_dish":"Crapaud (Mountain Chicken\\/Frog)"}','population' => '{"capital":"Roseau","language":"Antillean Creole French","population":"72,660","flag_shortdesc":"Ethnic Groups \\t\\n86.8% Black\\n8.9% Mixed\\n2.9% Kalinago\\n0.8% European\\n"}','image' => '1393453739ScottsHeadDominica.jpg','cover_image' => '1393453743dominicaseal.jpg','longitude' => '-61.370976','latitude' => '15.414999','ragion_map' => '1409750548dominica.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Dominica'),
	array('id' => '19','region_name' => 'Grenada','region_title' => 'About Grenada','independenceday' => '0000-00-00','description' => 'Known as the “Island of Spice”, Grenada is one of the world’s largest exporters of nutmeg and mace. The
	world’s first underwater sculpture park is located in the marine protected, Molinere Bay, just off of
	Grenada’s west coast and north of the capital city of St. George.','flag' => '1393454036FlagofGrenada.png','flag_desc' => '{"motto":"Ever Conscious of God We Aspire, Build and Advance as One People","anthem":"Hail Grenada","national_dish":"Oil Down"}','population' => '{"capital":"St. George\'s","language":"English","population":"109,590","flag_shortdesc":"Ethnic Groups\\t\\r\\n82% Black\\r\\n13% Mixed Black \\/ European\\r\\n5% European \\/ East Indiana"}','image' => '1393454036CalivignyIsland4.jpg','cover_image' => '1393454036Grenada.png','longitude' => '-61.679000','latitude' => '12.116500','ragion_map' => '1409750606grenada.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Grenada'),
	array('id' => '20','region_name' => 'Guyana','region_title' => 'About Guyana -  (Not An Island)','independenceday' => '1966-05-26','description' => 'Guyana is the only country in South America that has English as the national language. Approximately
	70% of this country is covered by forests. Guyana’s Kaieteur Falls are 741 feet high, about five times
	more than the height of Niagara Falls. One of the largest open-pit gold mines in the continent of
	America, The Omai gold mine, is located in Guyana.','flag' => '1393454311wsGuyanaFlag1920x1200.jpg','flag_desc' => '{"motto":"One People, One Nation, One Destiny","anthem":"Dear Land of Guyana, of Rivers and Plains","national_dish":"Pepperpot"}','population' => '{"capital":"Georgetown","language":"English","population":"752,940","flag_shortdesc":"Ethnic Groups \\r\\n43.5% East Indian\\r\\n30.2% Black (African)\\r\\n16.7% Mixed\\r\\n9.1% Amerindian\\r\\n0.5% Others\\r\\n"}','image' => '1393454312Kaieteur.jpg','cover_image' => '1393454312COATOFARMSofGUYANA.png','longitude' => '-58.930180','latitude' => '4.860416','ragion_map' => '1409750614guyana.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Guyana'),
	array('id' => '21','region_name' => 'Hawaii','region_title' => 'About Hawaii','independenceday' => '0000-00-00','description' => '','flag' => 'regionflag-21.png','flag_desc' => '{"motto":"The Life of the Land is Perpetuated in Righteousness","anthem":"","national_dish":"Spam Fried Rice"}','population' => '{"capital":"Honolulu","language":"Olelo Hawai\\\\\'i","population":"1,392,313","flag_shortdesc":"Ethnic Group\\n37.7%. Asian  \\n22.7%. White  \\n19.4%. Mixed Races"}','image' => '1393454621Hawaii2005.jpg','cover_image' => '1394406136ZXhXPTMwMAxhtp.jpg','longitude' => '-155.582782','latitude' => '19.896766','ragion_map' => '1409750671hawaii.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Hawaii'),
	array('id' => '22','region_name' => 'Honduras','region_title' => 'About Honduras (Bay Islands)','independenceday' => '0000-00-00','description' => 'Roatan, Utila and Guanaja are the three largest of several islands known as the Bay Islands of Honduras. These islands are remote and made for relaxation. So remote that there are no roads on Guanaja, all travel on the island is by foot or boat.','flag' => '1393454709honduras-flag-wallpaper-widescreen.jpg','flag_desc' => '{"motto":"Libre, Soberana e Independiente","anthem":"Himno Nacional de Honduras","national_dish":"Plato Tipico"}','population' => '{"capital":"Tegucigalpa","language":"Spanish","population":"8,249,574","flag_shortdesc":"Ethnic groups \\r\\n90% Mestizoa\\r\\n7% Amerindian\\r\\n2% Black\\r\\n1% White\\r\\n"}','image' => '1393454710Sandy-Bay-01.jpg','cover_image' => '1394406728542px-CoatofarmsofHonduras.svg.png','longitude' => '-86.241905','latitude' => '15.199999','ragion_map' => '1409750678honduras.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Honduras'),
	array('id' => '23','region_name' => 'Montserrat','region_title' => 'About Montserrat','independenceday' => '0000-00-00','description' => 'This island is nicknamed “The Emerald Isle” for its links with Ireland, as most of the early European settlers in Montserrat were Irish, and because of its beautifully green coastline before it was destroyed by the Soufrière Hills Volcano eruption in 1995.','flag' => '1393454885Montserrat.gif','flag_desc' => '{"motto":"Each Endeavouring, All Achieving","anthem":"God Save the Queen","national_dish":"Goat Water"}','population' => '{"capital":"Plymouth (De Jure)","language":"English","population":"5,164","flag_shortdesc":"Ethnic Group\\r\\n92.4% Black\\r\\n2.9%  Mixed\\r\\n1.0% East Indian"}','image' => '13934548852013-04-05-mists-over-montserrat-spain-dscn0566.jpg','cover_image' => '1393454888Montserratcoa.png','longitude' => '-62.187366','latitude' => '16.742498','ragion_map' => '1409750719montserrat.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Montserrat'),
	array('id' => '24','region_name' => 'Panama','region_title' => 'About Panama - (Not An Island)','independenceday' => '1903-11-28','description' => 'Panama is the only place in the world where you can see the sun rise on the Pacific and set on the Atlantic. The country’s capital, Panama City, is the only capital city in the world that has a rain forest within its city limits.','flag' => '1393454968Panama-Flag.jpg','flag_desc' => '{"motto":"Pro Mundi Beneficio","anthem":"Himno Istme&ntilde;o","national_dish":"Sancocho"}','population' => '{"capital":"Panama City","language":"Spanish","population":"3,661,868","flag_shortdesc":"Ethnic Groups\\t\\r\\n70% Mestizo (Amerindian and White)\\r\\n14% Amerindian and mixed (West Indian)\\r\\n10% White\\r\\n6%  Amerindian"}','image' => '1393454969beautiful-panama-beach-wallpapers-2560x1920.jpg','cover_image' => '1393454970Panama.png','longitude' => '-80.782127','latitude' => '8.537981','ragion_map' => '1409750727panama.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'Panama'),
	array('id' => '25','region_name' => 'Saint Kitts & Nevis','region_title' => 'About Saint Kitts and Nevis','independenceday' => '1983-09-19','description' => 'The center of both these islands is dominated by a volcanic mountain chain. Nevis, the smaller of the two, is surrounded by coral reefs and is almost a single mountain with a height of 3,232 feet. At the time of its discovery in the 15th century, St. Kitts was considered the mother colony of the West Indies.','flag' => '1393455164Saint-Kitts-and-Nevis.png','flag_desc' => '{"motto":"Country Above Self","anthem":"O Land of Beauty!","national_dish":"Stewed Saltfish w\\/ Spicy Plantains,Coconut Dumplings &amp; Seasoned Breadfruit"}','population' => '{"capital":"Basseterre","language":"English","population":"51,300","flag_shortdesc":"Ethnic Group \\n75.1% African descent\\n12.3% Afro-European \\n5.3% Mulatto \\n5% East Indian and Afro-East Indian "}','image' => '139345516434197976863c006fdf47o.jpg','cover_image' => '1393455166CoatofarmsofSaintKittsandNevisvariant.svg.png','longitude' => '-62.782998','latitude' => '17.357822','ragion_map' => '1409750789saint-kitts-and-nevis.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Saint Kitts & Nevis'),
	array('id' => '26','region_name' => 'St. Lucia','region_title' => 'About St. Lucia','independenceday' => '1979-02-22','description' => 'St. Lucia was named after St. Lucy of Sicily by French Colonizers. Orchids and several other exotic plants grow wild in the lush rainforests of this island. One of the most mountainous islands in the whole of the Caribbean, St. Lucia has the only drive in volcano in the world.','flag' => 'regionflag-26.png','flag_desc' => '{"motto":"The Land, The People, The Light","anthem":"Sons and Daughters of Saint Lucia","national_dish":"Salt Fish AndGreen Fig"}','population' => '{"capital":"Castries","language":"English","population":"173,765","flag_shortdesc":"Ethnic Groups\\t\\n68% Afro-Caribbean\\n5% European\\n17% Mixed\\n2% Carib Amerindian\\n5% Indo-Caribbean\\n"}','image' => '1393455277BeachSceneBackground.jpg','cover_image' => '1393455277528px-CoatofArmsofSaintLucia.svg.png','longitude' => '-60.978893','latitude' => '13.909444','ragion_map' => '1409750779st-lucia.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'St. Lucia'),
	array('id' => '27','region_name' => 'St. Vincent & The Grenadines','region_title' => 'About St. Vincent and The Grenadines','independenceday' => '1979-10-27','description' => 'There are over 32 islands and cays that make up St. Vincent and the Grenadines. Of these, nine are inhabited. The islands are renowned for their excellent conditions for pleasure sailing. The islands also feature powder-soft black sand beaches.','flag' => '1393455326Saint-Vincent-and-the-Grenadines.png','flag_desc' => '{"motto":"Pax et Justitia","anthem":"God Save the Queen","national_dish":"Roasted Breadfruit And Jack Fish"}','population' => '{"capital":"Kingstown","language":"English","population":"120,000","flag_shortdesc":"Ethnic Groups\\t\\n66% Black\\n19% Mixed\\n6.0% East Indian\\n4.0% European\\n2.0% Carib Amerindian\\n"}','image' => '1393455326Island-Saint-Vincent-and-the-Grenadines.jpg','cover_image' => '1393455327SaintVincentandtheGrenadines-COA.png','longitude' => '-61.196251','latitude' => '13.253351','ragion_map' => '1409750771st.vincent-and-the-gren.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'St. Vincent & Grenadines'),
	array('id' => '28','region_name' => 'U.S. Virgin Islands','region_title' => 'About Saint Croix, Saint John, and Saint Thomas','independenceday' => '0000-00-00','description' => 'The U.S. Virgin Islands consist of the main islands of Saint Croix, Saint John, and Saint Thomas, along with the much smaller but historically distinct Water Island, and many other surrounding minor islands. The U.S. Virgin Islands are known for their white sand beaches. Most of the islands, including Saint Thomas, are volcanic in origin and hilly.','flag' => '1393457280UVI-Flag.jpg','flag_desc' => '{"motto":"United in Pride and Hope","anthem":"Virgin Islands March","national_dish":"Okra Fungi"}','population' => '{"capital":"Charlotte Amalie","language":"English","population":"106,405","flag_shortdesc":"Ethnic Groups\\r\\n72.9% Black\\r\\n16.1% White\\r\\n0.9% Asian\\r\\n8.1% Mixed"}','image' => '1393457280CJS1136c.jpg','cover_image' => '1393457280SealoftheUSVirginIslands.gif','longitude' => '-64.805854','latitude' => '17.718643','ragion_map' => '1409750824u.s.-vrigin-island.png','status' => '1','twittershortdesc' => NULL,'region_titlebanner' => 'U.S. Virgin Islands'),
	array('id' => '29','region_name' => 'Turks And Caicos Islands','region_title' => 'About Turks and Caicos Islands','independenceday' => '0000-00-00','description' => 'Turks and Caicos Islands are a British Overseas Territory consisting of the larger Caicos Islands and smaller Turks Islands, two groups of tropical islands in the Lucayan Archipelago, part of the larger Antilles island grouping. They are known primarily for tourism and as an offshore financial centre.','flag' => '1393459954Turks-and-Caicos-Islands.gif','flag_desc' => '{"motto":"Beautiful By Nature","anthem":"This Land of Ours","national_dish":"Conch"}','population' => '{"capital":"Cockburn Town","language":"English","population":"46,400","flag_shortdesc":"Ethnic Groups\\t\\n90% Black\\n10% Mixed and White"}','image' => '1393459954Turks-and-Caicos-wallpaper.jpg','cover_image' => '1393459954turks-caicos-islands-Coat-of-arm.jpg','longitude' => '-71.797928','latitude' => '21.694025','ragion_map' => '1409750831turks-and-caicos-island.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Turks & Caicos'),
	array('id' => '30','region_name' => 'Kingdom of the Netherlands','region_title' => 'About Aruba, Bonaire, Curacao & St. Maarten','independenceday' => '0000-00-00','description' => '','flag' => '1394414512FlagoftheNetherlands.svg.png','flag_desc' => '{"motto":"Aruba - One Happy Island","anthem":"Bonaire - Tera di Solo y Suave Biento","national_dish":"St. Maarten-Conch &amp; Dumplings"}','population' => '{"capital":"Curacao -Willemstad","language":"Dutch\\/ Papiamentu","population":"17,034,544","flag_shortdesc":"Ethnic Group\\n80% Mixed African, Caribbean Amerindian and White\\n20%  Other"}','image' => '1394414512cupecoy-bg2.jpg','cover_image' => '1394411795KoninklijkwapenvanhetkoninkrijkderNederlanden.svg.png','longitude' => '-68.262382','latitude' => '12.201890','ragion_map' => '1409750708kingdom-of-netherland-and-french-caribbean-island.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'Kingdom of Netherlands'),
	array('id' => '31','region_name' => 'French Caribbean Islands','region_title' => 'About Guadeloupe, Martinique, St. Barts and St. Martin','independenceday' => '0000-00-00','description' => '','flag' => 'regionflag-31.png','flag_desc' => '{"motto":"Guadeloupe- Liberty Equlity Fraternity","anthem":"Martinique -La Marseillaise","national_dish":"St. Matin- Callaloo Soup"}','population' => '{"capital":"St. Martin -Marigot","language":"French ","population":"842,247","flag_shortdesc":"Ethnic Group\\n71% Black\\t\\n15% Indian \\n9%  White \\t\\n2%  Lebanese\\/Syrians\\t\\n3%  Chinese\\t"}','image' => '1393461985caribbean-dream-hd-1920x1080.jpg','cover_image' => '1393461830StMartinCoat.png','longitude' => '-61.551','latitude' => '16.265','ragion_map' => '1409750601french-caribbean-island-set.png','status' => '1','twittershortdesc' => '','region_titlebanner' => 'French Carib Islands')
);

$data = [];

foreach($a as $row)
{
	$tmp = [];
	foreach($key_map as $old => $new)
	{
		$tmp[$new] = $row[$old];
	}
	$data[] = $tmp;
}
print_r($data);


$expand = [
	'flag_desc','population'
];


foreach($data as &$row)
{
	foreach($expand as $z){
		$x = json_decode($row[$z],true);
		unset($row[$z]);
		$row = array_merge($row,$x);
		$row['ethnic_data'] = $row['flag_shortdesc'];
		unset($row['flag_shortdesc']);
	}
}

$tmp = array_keys($data[0]);
$optional = [];
foreach($tmp as $k)
{
	$optional[$k] = 'min';
}

foreach($data as $row)
{
	$t = $db->findOne('country',' name = ? ',[$row['name']]);
	$filter->generate_model($t,[],$optional,$row);
	$t->uri = strtolower(url_safe($t->name));
	$db->store($t);
}

function url_safe($title)
{
	$title = preg_replace('/[^A-Za-z 0-9]/','',$title);
	$title = preg_replace('/[\t\n\r\0\x0B]/', '', $title);
	$title = preg_replace('/([\s])\1+/', ' ', $title);
	$title = trim($title);
	$title = str_replace(' ','-',$title);
	return $title;
}